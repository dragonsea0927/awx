<at-panel>
    <at-panel-heading>
        {{ vm.panelTitle }}
    </at-panel-heading>
    <at-tab-group>
        <at-tab state="vm.tab.details">{{:: vm.strings.get('tab.DETAILS') }}</at-tab>
        <at-tab state="vm.tab.instances">{{:: vm.strings.get('tab.INSTANCES') }}</at-tab>
        <at-tab state="vm.tab.jobs">{{:: vm.strings.get('tab.JOBS') }}</at-tab>
    </at-tab-group>

    <at-panel-body style="margin-top: 20px">
        <div class="at-List-toolbar">
            <smart-search
                class="at-List-search"
                django-model="jobs"
                base-path="unified_jobs"
                iterator="job"
                list="list"
                dataset="job_dataset"
                collection="collection"
                search-tags="searchTags"
                query-set="querySet">
            </smart-search>
        </div>
        <at-list results="vm.jobs">
            <!-- TODO: implement resources are missing red indicator as present in mockup -->
            <at-row ng-repeat="job in vm.jobs"
                ng-class="{'at-Row--active': (job.id === vm.activeId)}"
                job-id="{{ job.id }}">
                <div style="align-self:flex-start;margin:0 10px 0 0">
                    <a href="{{ job.detailsUrl }}" ng-if="isSuccessful(job.status)" aw-tool-tip="Job successful. Click for details." aw-tip-placement="right">
                        <i class="fa DashboardList-status DashboardList-status--success icon-job-successful"
                        style="margin:0"></i>
                    </a>
                    <a href="{{ job.detailsUrl }}" ng-if="!isSuccessful(job.status)" aw-tool-tip="Job failed. Click for details." aw-tip-placement="right">
                        <i class="fa DashboardList-status DashboardList-status--failed icon-job-failed"
                        style="margin:0"></i>
                    </a>
                </div>
                <div class="at-Row-items">
                    <at-row-item
                        header-value="{{ job.name }}"
                        header-link="/#/jobs/{{ job.id }}"
                        header-tag="{{ vm.jobTypes[job.type] }}">
                    </at-row-item>
                    <at-row-item
                        label-value="{{:: vm.jobStrings.get('list.ROW_ITEM_LABEL_STARTED') }}"
                        value="{{ vm.getTime(job.started) }}">
                    </at-row-item>
                    <at-row-item
                        label-value="{{:: vm.jobStrings.get('list.ROW_ITEM_LABEL_FINISHED') }}"
                        value="{{ vm.getTime(job.finished) }}">
                    </at-row-item>
                    <at-row-item
                        header-value="{{ job.name }}"
                        header-link="/#/jobs/workflow_job/{{ job.id }}"
                        header-tag="{{ vm.jobTypes[job.type] }}"
                        ng-if="job.type === 'workflow_job_job'">
                    </at-row-item>
                    <at-row-item
                        label-value="{{:: vm.jobStrings.get('list.ROW_ITEM_LABEL_TEMPLATE') }}"
                        value="{{ job.summary_fields.job_template.name }}"
                        value-link="/#/templates/job_template/{{ job.summary_fields.job_template.id }}">
                    </at-row-item>
                    <at-row-item
                        label-value="{{:: vm.jobStrings.get('list.ROW_ITEM_LABEL_INVENTORY') }}"
                        value="{{ job.summary_fields.inventory.name }}"
                        value-link="/#/inventories/inventory/{{ job.summary_fields.inventory.id }}">
                    </at-row-item>
                    <at-row-item
                        label-value="{{:: vm.jobStrings.get('list.ROW_ITEM_LABEL_PROJECT') }}"
                        value="{{ job.summary_fields.project.name }}"
                        value-link="/#/projects/{{ job.summary_fields.project.id }}">
                    </at-row-item>
                    <!-- TODO: add see more for creds -->
                    <at-row-item
                        label-value="{{:: vm.jobStrings.get('list.ROW_ITEM_LABEL_CREDENTIALS') }}"
                        tag-values="job.summary_fields.credentials"
                        tags-are-creds="true">
                    </at-row-item>
                </div>
                <div class="at-Row-actions">
                    <at-row-action icon="icon-launch" ng-click="vm.submitJob(job)"
                        ng-show="job.summary_fields.user_capabilities.start">
                    </at-row-action>
                    <at-row-action icon="fa-copy" ng-click="vm.copyjob(job)"
                        ng-show="job.summary_fields.user_capabilities.copy">
                    </at-row-action>
                    <at-row-action icon="fa-trash" ng-click="vm.deletejob(job)"
                        ng-show="job.summary_fields.user_capabilities.delete">
                    </at-row-action>
                </div>
            </at-row>
        </at-list>
        <paginate
            collection="vm.jobs"
            dataset="vm.dataset"
            iterator="job"
            base-path="unified_jobs"
            query-set="vm.queryset">
        </paginate>
    </at-panel-body>
</at-panel>
